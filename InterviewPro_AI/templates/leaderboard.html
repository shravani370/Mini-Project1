{% extends "base.html" %}

{% block content %}
<div class="leaderboard-container">
    <div class="page-header">
        <h1>üèÜ Leaderboard</h1>
        <p>See how you stack up against other interview preppers!</p>
    </div>

    <div class="leaderboard-content">
        <!-- Top 3 Podium -->
        <div class="podium-section">
            <div class="podium">
                <!-- 2nd Place -->
                <div class="podium-item second">
                    <div class="rank-badge">2</div>
                    <div class="podium-avatar">{{ leaderboard[1].avatar }}</div>
                    <div class="podium-name">{{ leaderboard[1].name }}</div>
                    <div class="podium-xp">{{ leaderboard[1].xp }} XP</div>
                    <div class="podium-bar" style="height: 140px;"></div>
                </div>
                
                <!-- 1st Place -->
                <div class="podium-item first">
                    <div class="crown">üëë</div>
                    <div class="rank-badge">1</div>
                    <div class="podium-avatar">{{ leaderboard[0].avatar }}</div>
                    <div class="podium-name">{{ leaderboard[0].name }}</div>
                    <div class="podium-xp">{{ leaderboard[0].xp }} XP</div>
                    <div class="podium-bar" style="height: 180px;"></div>
                </div>
                
                <!-- 3rd Place -->
                <div class="podium-item third">
                    <div class="rank-badge">3</div>
                    <div class="podium-avatar">{{ leaderboard[2].avatar }}</div>
                    <div class="podium-name">{{ leaderboard[2].name }}</div>
                    <div class="podium-xp">{{ leaderboard[2].xp }} XP</div>
                    <div class="podium-bar" style="height: 120px;"></div>
                </div>
            </div>
        </div>

        <!-- Your Rank Card -->
        <div class="your-rank-card">
            <div class="rank-info">
                <span class="your-label">Your Current Rank</span>
                <span class="your-rank">#{{ current_user_rank }}</span>
            </div>
            <div class="rank-progress">
                <div class="progress-xp">
                    <span class="xp-icon">‚ö°</span>
                    <span class="xp-value">{{ current_user_xp }} XP</span>
                </div>
                <div class="xp-to-next">120 XP to next rank</div>
            </div>
        </div>

        <!-- Full Rankings -->
        <div class="rankings-list">
            <h3>Top Interviewers</h3>
            {% for user in leaderboard %}
            <div class="ranking-item {% if loop.index <= 3 %}top-three{% endif %}">
                <div class="rank">{{ user.rank }}</div>
                <div class="avatar">{{ user.avatar }}</div>
                <div class="info">
                    <div class="name">{{ user.name }}</div>
                    <div class="stats">{{ user.interviews }} interviews completed</div>
                </div>
                <div class="xp">{{ user.xp }} XP</div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>
{% endblock %}

{% block extra_css %}
<style>
.leaderboard-container {
    max-width: 900px;
    margin: 0 auto;
    padding: 2rem;
}

.page-header {
    text-align: center;
    margin-bottom: 3rem;
}

.page-header h1 {
    font-size: 2.5rem;
    margin-bottom: 0.5rem;
}

.page-header p {
    color: #94a3b8;
}

.podium-section {
    margin-bottom: 2rem;
}

.podium {
    display: flex;
    justify-content: center;
    align-items: flex-end;
    gap: 1rem;
    padding: 2rem;
    background: linear-gradient(135deg, #1e293b, #0f172a);
    border-radius: 20px;
}

.podium-item {
    display: flex;
    flex-direction: column;
    align-items: center;
    position: relative;
    padding-top: 60px;
}

.podium-item.first {
    order: 2;
    padding-top: 80px;
}

.podium-item.second {
    order: 1;
}

.podium-item.third {
    order: 3;
}

.crown {
    position: absolute;
    top: -20px;
    font-size: 2rem;
}

.rank-badge {
    position: absolute;
    top: 0;
    width: 30px;
    height: 30px;
    background: #334155;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    font-size: 0.9rem;
}

.podium-item.first .rank-badge {
    background: linear-gradient(135deg, #fbbf24, #f59e0b);
    color: #000;
}

.podium-item.second .rank-badge {
    background: linear-gradient(135deg, #94a3b8, #64748b);
    color: #000;
}

.podium-item.third .rank-badge {
    background: linear-gradient(135deg, #d97706, #b45309);
    color: #fff;
}

.podium-avatar {
    font-size: 3rem;
    margin-bottom: 0.5rem;
}

.podium-name {
    font-weight: 600;
    color: #f8fafc;
    margin-bottom: 0.25rem;
}

.podium-xp {
    color: #818cf8;
    font-weight: 500;
}

.podium-bar {
    width: 60px;
    background: linear-gradient(180deg, #6366f1, #4f46e5);
    border-radius: 8px 8px 0 0;
    margin-top: 0.5rem;
}

.your-rank-card {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.2), rgba(139, 92, 246, 0.2));
    border: 1px solid rgba(99, 102, 241, 0.3);
    border-radius: 16px;
    padding: 1.5rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 2rem;
}

.your-label {
    color: #94a3b8;
    display: block;
    font-size: 0.9rem;
}

.your-rank {
    font-size: 2.5rem;
    font-weight: 700;
    color: #818cf8;
}

.progress-xp {
    display: flex;
    align-items: center;
    gap: 0.5rem;
}

.xp-icon {
    font-size: 1.5rem;
}

.xp-value {
    font-size: 1.25rem;
    font-weight: 600;
    color: #fbbf24;
}

.xp-to-next {
    color: #64748b;
    font-size: 0.85rem;
    margin-top: 0.25rem;
}

.rankings-list h3 {
    margin-bottom: 1rem;
    color: #f8fafc;
}

.ranking-item {
    display: flex;
    align-items: center;
    gap: 1rem;
    padding: 1rem;
    background: #1e293b;
    border-radius: 12px;
    margin-bottom: 0.75rem;
    border: 1px solid #334155;
}

.ranking-item.top-three {
    background: linear-gradient(135deg, rgba(99, 102, 241, 0.1), rgba(139, 92, 246, 0.1));
    border-color: rgba(99, 102, 241, 0.3);
}

.ranking-item .rank {
    width: 30px;
    height: 30px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: 700;
    color: #94a3b8;
}

.ranking-item.top-three .rank {
    color: #fbbf24;
}

.ranking-item .avatar {
    font-size: 1.5rem;
}

.ranking-item .info {
    flex: 1;
}

.ranking-item .name {
    font-weight: 600;
    color: #f8fafc;
}

.ranking-item .stats {
    font-size: 0.8rem;
    color: #64748b;
}

.ranking-item .xp {
    font-weight: 600;
    color: #818cf8;
}

@media (max-width: 600px) {
    .your-rank-card {
        flex-direction: column;
        text-align: center;
        gap: 1rem;
    }
    
    .podium-avatar {
        font-size: 2rem;
    }
}
</style>
{% endblock %}

